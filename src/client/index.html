<!DOCTYPE html>
<html>
<head>
	<title>Report on Trends</title>
	
	<meta name=description content="">
	<meta charset=utf-8>
	<meta name=viewport content="width=device-width, initial-scale=1">

	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css">
	<script src="https://d3js.org/d3.v5.min.js"></script>

	<style type="text/css">
		div{
			white-space: nowrap;
		}
	</style>
</head>
<body>
	<header class="jumbotron">
		<h1>Data</h1>
	</header>
	<main class="container mx-4 px-4">
		<div id="a1" class="card px-4">
		</div>
	</main>

	<script type="text/javascript">
		const t = d3.transition()
			.duration(7000);

		Promise.all([
			fetch('/api/colors')
			.then(blob => blob.json()),
			fetch('/api/trends')
			.then(blob => blob.json())
		])
		.then(res =>{
			let [colors, data] = res;
			// console.log(colors, data);
			d3.select('#a1')
				.selectAll('div')
				.data(data.slice(0, 10))
				.enter()
				.append('div')
				.style('width', function(d){return d.vowels * 20 + 'px'})
				.style('background', colors[0][1])
				.append('div')
				.style('width', function(d){return d.text.length + 'px'})
				.style('background', colors[0][0])
				.text(function(d){return d.text})
				.transition(t)
				.style('background', colors[0][1]);
		});
	</script>
</body>
</html>